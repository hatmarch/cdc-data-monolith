= Appendix
include::_attributes.adoc[]

[#querysql]
== Querying the SQL database

In a pinch you can query the sql database like this (NOTE: assumes this is run from the project where the DB server is)

[.console-input]
[source,bash,subs="+macros,+attributes"]
----
oc exec deployment/mssql-server-linux -- /opt/mssql-tools/bin/sqlcmd -S mssql-server-linux -U sa -P 'Password!' -q 'SELECT * FROM InternationalDB.dbo.Orders'
----

Alternatively (originally from lab)

----
oc exec deployment/mssql-server-linux -- /opt/mssql-tools/bin/sqlcmd -S mssql-server-linux -U sa -P Password! -d InternationalDB -Q "select top 5 * from dbo.Orders where OrderUser='admin'"
----

[#kafkatopicdebug]
== Debugging Kafka Topics

You can run a consumer to see all that's been posted to a kafka topic by running the following command (NOTE: This assumes that command is run in the context of the current kafka project)

[.console-input]
[source,bash,subs="+macros,+attributes"]
----
oc exec -it demo-kafka-0 -- bin/kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic mssql-server-linux.dbo.Orders --from-beginning
----

[#mssql]
== Connect and View MS SQL Database

You can use adminer to connect to the mssql database.  Run this command from the VSCode terminal (assuming your current project is the project that houses the SQL Server)

[.console-input]
[source,bash,subs="+macros,+attributes"]
----
oc port-forward svc/mssql-server-linux 1433:1433
----

Then, back on your host machine, run the following in a terminal

[.console-input]
[source,bash,subs="+macros,+attributes"]
----
docker run --rm -p 8080:8080 -e ADMINER_DEFAULT_SERVER=docker.for.mac.localhost:1433 adminer
----

[IMPORTANT]
====
Make sure the port after `docker.for.mac.localhost` matches the port that you are forwarding from the VSCode terminal
====

On your local machine, navigate to port 8080

image::adminer.png[]

* *Username*: `sa`
* *Password*: `Password!`
* *Database*: `InternationalDB`
